# 组件通信与数据传递

> 目标：掌握父子/兄弟/跨层级通信方式，选对最合适的一种。

## 父 → 子：props

```vue
<Child :title="title" :count="count" />
```

```js
export default { props: { title: String, count: Number } };
```

## 子 → 父：自定义事件

```vue
<Child @delete="removeItem" />
```

```js
// 子组件
export default {
  emits: ["delete"],
  methods: {
    onClick() {
      this.$emit("delete", this.id);
    },
  },
};
```

## v-model 在组件上的用法

```vue
<Toggle v-model="open" />
```

```js
export default {
  props: { modelValue: Boolean },
  emits: ["update:modelValue"],
  methods: {
    toggle() {
      this.$emit("update:modelValue", !this.modelValue);
    },
  },
};
```

## 兄弟通信：事件总线/父中转/状态管理

- 简单场景：将事件冒泡到父组件，再由父分发到另一个子组件
- 复杂场景：Pinia/Vuex 维护共享状态

## 跨层级：provide/inject

```js
// 祖先
import { provide } from "vue";
provide("theme", "dark");
// 后代
import { inject } from "vue";
const theme = inject("theme", "light");
```

## 插槽与作用域插槽

```html
<List :items="items">
  <template #default="{ item, idx }"> {{ idx + 1 }}. {{ item.name }} </template>
</List>
```

## 练习建议

- 封装 `Modal` 组件，支持 `v-model:open` 控制显隐
- 使用 `provide/inject` 实现主题上下文共享
