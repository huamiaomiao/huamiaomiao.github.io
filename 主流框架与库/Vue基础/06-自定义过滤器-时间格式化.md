# 自定义过滤器：时间格式化（Vue2 风格）与推荐替代

> 目标：实现一个简单的“时间格式化”功能，并了解在 Vue3 的替代方式。

## Vue2 过滤器（在模板中使用）

```js
// 全局
Vue.filter("date", (ts) => new Date(ts).toLocaleString());
// 局部
filters: {
  date(ts) { return new Date(ts).toLocaleString() }
}
```

```html
<span>{{ createdAt | date }}</span>
```

注意：Vue3 已移除过滤器语法，推荐用“方法/计算属性/自定义指令/组件函数”替代。

## Vue3 推荐：方法/计算属性

```html
<template><span>{{ formatDate(createdAt) }}</span></template>
<script>
  export default {
    methods: {
      formatDate(ts) {
        const d = new Date(ts);
        return new Intl.DateTimeFormat("zh-CN", {
          year: "numeric",
          month: "2-digit",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
        }).format(d);
      },
    },
  };
</script>
```

## 组合式 API（可复用）

```js
// useDateFormat.js
export function useDateFormat(locale = "zh-CN", opts = {}) {
  const fmt = new Intl.DateTimeFormat(locale, {
    year: "numeric",
    month: "2-digit",
    day: "2-digit",
    hour: "2-digit",
    minute: "2-digit",
    second: "2-digit",
    ...opts,
  });
  const format = (ts) => fmt.format(new Date(ts));
  return { format };
}
```

```html
<template><span>{{ format(createdAt) }}</span></template>
<script>
  import { useDateFormat } from "./useDateFormat";
  export default {
    setup() {
      const { format } = useDateFormat();
      return { format };
    },
  };
</script>
```

## 练习建议

- 编写 `useRelativeTime`，返回“几分钟前/几小时前”的字符串
- 根据 `locale` 动态切换日期格式
