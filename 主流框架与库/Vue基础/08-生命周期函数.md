# Vue 实例的生命周期函数

> 目标：理解组件从创建到销毁的各个阶段，知道在何处编写逻辑。

## 选项式 API（Options API）

顺序与用途：

- `beforeCreate`：实例初始化之前（数据/事件未建立）
- `created`：数据已建立（可访问 `data`、`methods`），DOM 未挂载
- `beforeMount`：挂载开始前
- `mounted`：DOM 已挂载（可访问到真实 DOM）
- `beforeUpdate`：更新前（data 变化但 DOM 未更新）
- `updated`：DOM 已更新
- `beforeUnmount`：卸载前
- `unmounted`：已卸载

```js
export default {
  mounted() {
    this.$nextTick(() => {
      // DOM 已经更新
    });
  },
  beforeUnmount() {
    // 移除定时器/监听器
  },
};
```

## 组合式 API（Composition API）

```js
import { onMounted, onBeforeUnmount } from "vue";
export default {
  setup() {
    onMounted(() => {
      /* ... */
    });
    onBeforeUnmount(() => {
      /* ... */
    });
  },
};
```

## 常见场景

- `mounted`：DOM 尺寸计算、第三方库初始化
- `beforeUnmount`：清理副作用（事件、订阅、定时器）
- `watch`：响应式副作用，替代部分生命周期使用

## 练习建议

- 封装一个 `useInterval` 组合函数，组件销毁时自动清理
- 在 `mounted` 中初始化图表，并在 `beforeUnmount` 中销毁实例
