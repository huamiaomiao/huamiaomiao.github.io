<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Markdown é¢„è§ˆ</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/github-markdown-css@5.5.1/github-markdown.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css"
    />
    <style>
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        background: #f6f8fa;
        display: grid;
        grid-template-rows: auto 1fr; /* é¡¶éƒ¨å·¥å…·æ  + å æ»¡å‰©ä½™ */
        overflow: hidden; /* ç¦æ­¢é¡µé¢æ•´ä½“æ»šåŠ¨ */
      }
      .toolbar {
        position: sticky;
        top: 0;
        z-index: 10;
        display: flex;
        gap: 12px;
        align-items: center;
        padding: 10px 16px;
        background: #fff;
        border-bottom: 1px solid #eaecef;
      }
      .container {
        max-width: 920px;
        margin: 0 auto;
        padding: 24px 16px 64px;
      }
      .dropzone {
        border: 1px dashed #c9d1d9;
        border-radius: 8px;
        padding: 16px;
        color: #57606a;
      }
      .dropzone.dragover {
        background: #f0f6ff;
        border-color: #0969da;
        color: #0969da;
      }
      .markdown-body {
        box-sizing: border-box;
        min-width: 200px;
        max-width: 100%;
      }
      .markdown-body img {
        max-width: 100%;
      }
      /* åˆ†æ å¸ƒå±€ */
      .split {
        display: flex;
        height: 100%; /* å æ»¡ grid ç¬¬äºŒè¡Œ */
        min-height: 0; /* å…è®¸å­å…ƒç´ åœ¨ flex ä¸­æ»šåŠ¨ */
      }
      .sidebar {
        box-sizing: border-box;
        width: 300px;
        flex: 0 0 300px;
        border-right: 1px solid #eaecef;
        background: #fff;
        padding: 8px;
        overflow: auto;
      }
      .sidebar h3 {
        margin: 8px 8px 6px;
        font-size: 14px;
        color: #24292f;
      }
      .main {
        flex: 1;
        min-width: 0;
        overflow: auto; /* ä»…å³ä¾§å†…å®¹åŒºæ»šåŠ¨ */
      }
      /* æ ‘ç»„ä»¶æ ·å¼ */
      .tree {
        list-style: none;
        margin: 0;
        padding: 0 4px 24px 4px;
        font-size: 14px;
        line-height: 1.5;
      }
      .tree-item {
        margin: 2px 0;
      }
      .tree-row {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 6px 8px;
        border-radius: 8px;
        color: #24292f;
        cursor: pointer;
        user-select: none;
        position: relative;
        min-height: 32px;
        transition: background 0.15s ease, color 0.15s ease;
      }
      .tree-row:hover {
        background: var(--accent-hover);
      }
      .tree-row.active {
        background: var(--accent-bg);
        color: var(--accent-700);
        box-shadow: inset 0 0 0 1px rgba(34, 197, 94, 0.25);
      }
      .tree-row.active::before {
        content: "";
        position: absolute;
        left: 0;
        top: 16%;
        width: 3px;
        height: 68%;
        background: var(--accent);
        border-radius: 2px;
      }
      .tree-toggle {
        width: 14px;
        height: 14px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        color: #57606a;
        transition: transform 0.18s ease;
      }
      /* å±•å¼€æ—¶è®©ç®­å¤´æ—‹è½¬ï¼ˆè‹¥å­—ç¬¦æ˜¯ â–¸ ä¹Ÿèƒ½å½¢æˆè§†è§‰â€œå‘ä¸‹â€æ•ˆæœï¼‰ */
      .tree-item:not(.collapsed) > .tree-row .tree-toggle {
        transform: rotate(90deg);
      }
      .tree-children {
        margin-left: 16px;
        padding-left: 12px;
        list-style: none;
        overflow: hidden;
        max-height: 9999px;
        opacity: 1;
        transition: max-height 0.26s cubic-bezier(0.4, 0, 0.2, 1),
          opacity 0.18s linear;
        will-change: max-height, opacity;
        /* border-left: 1px dashed #eaecef; */
      }
      @media (prefers-reduced-motion: reduce) {
        .tree-children {
          transition: none;
        }
      }
      /* å­çº§é€‰ä¸­æ—¶ï¼Œé«˜äº®çˆ¶çº§æ–‡å­—ä¸ç®­å¤´é¢œè‰² */
      .tree-item:has(.tree-children .tree-row.active) > .tree-row {
        color: var(--accent-700);
      }
      .tree-item:has(.tree-children .tree-row.active) > .tree-row .tree-toggle {
        color: var(--accent-700);
      }
      /* æ–‡æœ¬å•è¡Œçœç•¥ï¼Œé˜²æ­¢è¿‡é•¿æ¢è¡Œ */
      .tree-row > span:last-child {
        flex: 1;
        min-width: 0;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .collapsed > .tree-children {
        max-height: 0;
        opacity: 0;
      }
      /* Markdown ç»†èŠ‚ç¾åŒ– */
      .container {
        background: #fff;
        border: 1px solid #eaecef;
        border-radius: 12px;
        box-shadow: 0 6px 24px rgba(140, 149, 159, 0.15);
      }
      :root {
        --accent: #22c55e; /* ç»¿è‰²ä¸»è‰² */
        --accent-700: #16a34a;
        --accent-bg: #eafaf1; /* é€‰ä¸­è¡ŒèƒŒæ™¯ */
        --accent-hover: #f0fdf4; /* æ‚¬æµ®è¡ŒèƒŒæ™¯ */
      }
      .markdown-body {
        line-height: 1.75;
        color: #24292f;
      }
      .markdown-body h1,
      .markdown-body h2,
      .markdown-body h3 {
        scroll-margin-top: 72px;
        letter-spacing: 0.2px;
      }
      .markdown-body blockquote {
        background: #f0f6ff;
        border-left: 4px solid #0969da;
        color: #1f2328;
        padding: 10px 14px;
        border-radius: 8px;
      }
      .markdown-body table {
        display: block;
        width: 100%;
        overflow: auto;
        border-collapse: separate;
        border-spacing: 0;
        border: 1px solid #d0d7de;
        border-radius: 8px;
      }
      .markdown-body table th,
      .markdown-body table td {
        border: 0;
      }
      .markdown-body table thead th {
        background: #f6f8fa;
        border-bottom: 1px solid #d0d7de;
      }
      .markdown-body table tr + tr td {
        border-top: 1px solid #d0d7de;
      }
      .markdown-body img {
        border-radius: 8px;
        box-shadow: 0 2px 16px rgba(0, 0, 0, 0.06);
      }
      /* ä»£ç ï¼šè¡Œå†…ä¸ä»£ç å— */
      .markdown-body :not(pre) > code {
        background: #f6f8fa;
        border: 1px solid #d0d7de;
        border-radius: 6px;
        padding: 0.15em 0.4em;
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
        color: #1f2328;
      }
      /* ä»£ç å—é‡‡ç”¨é»‘è‰²ä¸»é¢˜ï¼ˆè¦†ç›– highlight.js æ ·å¼ï¼‰ */
      .markdown-body pre,
      .markdown-body pre code,
      .hljs {
        background: #0d1117 !important;
        color: #e6edf3 !important;
      }
      .hljs {
        border: 1px solid #30363d;
        border-radius: 8px;
        padding: 16px;
        overflow: auto;
      }
      .markdown-body pre code {
        background: transparent !important;
        border: 0;
        padding: 0;
      }
      /* å¸¸è§è¯­æ³•é«˜äº®é¢œè‰²ï¼ˆGitHub Dark ç±»ä¼¼è°ƒè‰²ï¼‰ */
      .hljs-comment,
      .hljs-quote {
        color: #8b949e !important;
      }
      .hljs-keyword,
      .hljs-selector-tag,
      .hljs-literal {
        color: #ff7b72 !important;
      }
      .hljs-string,
      .hljs-attr,
      .hljs-template-variable {
        color: #a5d6ff !important;
      }
      .hljs-number,
      .hljs-built_in,
      .hljs-builtin-name {
        color: #79c0ff !important;
      }
      .hljs-function .hljs-title,
      .hljs-title.function_ {
        color: #d2a8ff !important;
      }
      .hljs-meta,
      .hljs-meta .hljs-keyword {
        color: #7ee787 !important;
      }
      /* HTML æ ‡ç­¾ä¸å±æ€§ç€è‰²ï¼ˆæé«˜ä¼˜å…ˆçº§ï¼Œè¦†ç›–ä¸»é¢˜ï¼‰ */
      code.hljs .hljs-tag,
      code.hljs .hljs-name,
      .language-html .hljs-tag,
      .language-xml .hljs-tag {
        color: #7ee787 !important; /* æ ‡ç­¾å/æ•´ä½“æ ‡ç­¾ */
      }
      code.hljs .hljs-attr,
      code.hljs .hljs-attribute {
        color: #e3b341 !important; /* å±æ€§åï¼šé‡‘è‰² */
      }
      code.hljs .hljs-string {
        color: #a5d6ff !important; /* å±æ€§å€¼ */
      }
      code.hljs .hljs-meta,
      code.hljs .hljs-symbol {
        color: #79c0ff !important; /* å¦‚ <!DOCTYPE> ç­‰ */
      }
      /* ä¾§è¾¹æ ‘æ ·å¼å¢å¼º */
      .tree-row {
        transition: background 0.2s ease, color 0.2s ease;
      }
      .tree-row.active {
        box-shadow: inset 0 0 0 1px rgba(34, 197, 94, 0.25);
      }
      .tree-children {
        border-left-color: #d0d7de;
      }
      /* æ»šåŠ¨æ¡ç»†åŒ–ï¼ˆWebKitï¼‰ */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-thumb {
        background: #c9d1d9;
        border-radius: 10px;
        border: 2px solid transparent;
        background-clip: content-box;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      /* é¡¶éƒ¨æ ‡é¢˜æ ·å¼ */
      .toolbar {
        gap: 16px;
      }
      .app-title {
        font-weight: 600;
        color: #24292f;
        letter-spacing: 0.3px;
      }
    </style>
  </head>
  <body>
    <div class="toolbar">
      <div class="app-title">ğŸ“š å‰ç«¯å­¦ä¹ è·¯å¾„</div>
    </div>
    <div class="split">
      <aside class="sidebar">
        <nav id="treeRoot" aria-label="ç›®å½•"></nav>
      </aside>
      <div class="main">
        <div class="container">
          <article
            id="content"
            class="markdown-body"
            style="margin-top: 16px"
          ></article>
        </div>
      </div>
    </div>

    <!-- é»˜è®¤å†…åµŒçš„ Markdownï¼ˆç”¨äºæœ¬åœ°ç›´æ¥æ‰“å¼€æ—¶æ˜¾ç¤ºå¤§çº²ï¼‰ -->
    <script id="embedded-md" type="text/markdown"></script>
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@14.1.0/dist/markdown-it.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/build/languages/xml.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/build/languages/javascript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/build/languages/typescript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/build/languages/css.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/build/languages/json.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/build/languages/bash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/build/languages/yaml.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/build/languages/markdown.min.js"></script>
    <script>
      let data = {
        label: "å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆå­¦ä¹ è·¯å¾„",
        path: "./docs/å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆå­¦ä¹ å¤§çº².md",
        children: [
          {
            label: "æ ¸å¿ƒæŠ€æœ¯åŸºç¡€",
            children: [
              {
                label: "HTML5 åŸºç¡€",
                children: [
                  {
                    label: "è¯­ä¹‰ä¸æ–‡æ¡£",
                    path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/01-HTML5åŸºç¡€/01-è¯­ä¹‰åŒ–æ ‡ç­¾ä¸ç»“æ„.md",
                    children: [],
                  },
                  {
                    label: "è¡¨å•ä¸äº¤äº’åŸºç¡€",
                    path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/01-HTML5åŸºç¡€/02-è¡¨å•ä¸äº¤äº’å…ƒç´ .md",
                    children: [],
                  },
                  {
                    label: "å¸ƒå±€ä¸å“åº”å¼",
                    path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/01-HTML5åŸºç¡€/03-å“åº”å¼å¸ƒå±€.md",
                    children: [],
                  },
                  {
                    label: "å¤šåª’ä½“ä¸ Canvas",
                    path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/01-HTML5åŸºç¡€/04-å¤šåª’ä½“ä¸Canvas.md",
                    children: [],
                  },
                ],
              },
              {
                label: "CSS3 è¿›é˜¶",
                children: [
                  {
                    label: "flexboxå¸ƒå±€",
                    path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/02-CSS3è¿›é˜¶/01-Flexboxå¸ƒå±€.md",
                    children: [],
                  },
                  {
                    label: "Gridå¸ƒå±€",
                    path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/02-CSS3è¿›é˜¶/02-Gridå¸ƒå±€.md",
                    children: [],
                  },
                  {
                    label: "åŠ¨ç”»ä¸è¿‡æ¸¡æ•ˆæœ",
                    path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/02-CSS3è¿›é˜¶/03-åŠ¨ç”»ä¸è¿‡æ¸¡æ•ˆæœ.md",
                    children: [],
                  },
                  {
                    label: "é¢„å¤„ç†å™¨ï¼ˆSass/Lessï¼‰",
                    path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/02-CSS3è¿›é˜¶/04-é¢„å¤„ç†å™¨-Sassä¸Less.md",
                    children: [],
                  },
                  {
                    label: "åª’ä½“æŸ¥è¯¢ä¸å“åº”å¼ç­–ç•¥",
                    path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/02-CSS3è¿›é˜¶/05-åª’ä½“æŸ¥è¯¢ä¸å“åº”å¼ç­–ç•¥.md",
                    children: [],
                  },
                ],
              },
              {
                label: "JavaScript æ ¸å¿ƒ",
                children: [
                  {
                    label: "å…¥é—¨åŸºç¡€",
                    children: [
                      {
                        label: "ES5 ä¸ ES6 æ¦‚è§ˆ",
                        path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/03-JavaScriptæ ¸å¿ƒ/05-JavaScriptåŸºç¡€-ES6è¯­æ³•/01-ES5å’ŒES6çš„ä»‹ç».md",
                        children: [],
                      },
                      {
                        label: "ä¸¥æ ¼æ¨¡å¼ä¸ ES5 æ‰©å±•",
                        path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/03-JavaScriptæ ¸å¿ƒ/05-JavaScriptåŸºç¡€-ES6è¯­æ³•/02-ES5ä¸­çš„ä¸¥æ ¼æ¨¡å¼.md",
                        children: [],
                      },
                      {
                        label: "ES5 å¸¸ç”¨æ‰©å±•",
                        path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/03-JavaScriptæ ¸å¿ƒ/05-JavaScriptåŸºç¡€-ES6è¯­æ³•/03-ES5ä¸­çš„ä¸€äº›æ‰©å±•.md",
                        children: [],
                      },
                    ],
                  },
                  {
                    label: "ES6 è¯­æ³•åŸºçŸ³",
                    children: [
                      {
                        label: "å˜é‡ï¼šlet/const ä¸å—çº§ä½œç”¨åŸŸ",
                        path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/03-JavaScriptæ ¸å¿ƒ/05-JavaScriptåŸºç¡€-ES6è¯­æ³•/04-ES6-å˜é‡-let-const-å’Œå—çº§ä½œç”¨åŸŸ.md",
                        children: [],
                      },
                      {
                        label: "è§£æ„èµ‹å€¼",
                        path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/03-JavaScriptæ ¸å¿ƒ/05-JavaScriptåŸºç¡€-ES6è¯­æ³•/05-ES6-å˜é‡çš„è§£æ„èµ‹å€¼.md",
                        children: [],
                      },
                      {
                        label: "ç®­å¤´å‡½æ•°ä¸ this",
                        path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/03-JavaScriptæ ¸å¿ƒ/05-JavaScriptåŸºç¡€-ES6è¯­æ³•/06-ES6-ç®­å¤´å‡½æ•°.md",
                        children: [],
                      },
                      {
                        label: "å‰©ä½™å‚æ•°ä¸å±•å¼€è¿ç®—ç¬¦",
                        path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/03-JavaScriptæ ¸å¿ƒ/05-JavaScriptåŸºç¡€-ES6è¯­æ³•/07-å‰©ä½™å‚æ•°å’Œæ‰©å±•è¿ç®—ç¬¦.md",
                        children: [],
                      },
                      {
                        label: "å­—ç¬¦ä¸²/æ•°ç»„/å¯¹è±¡æ‰©å±•",
                        path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/03-JavaScriptæ ¸å¿ƒ/05-JavaScriptåŸºç¡€-ES6è¯­æ³•/08-å­—ç¬¦ä¸²-æ•°ç»„-å¯¹è±¡çš„æ‰©å±•.md",
                        children: [],
                      },
                      {
                        label: "Set æ•°æ®ç»“æ„",
                        path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/03-JavaScriptæ ¸å¿ƒ/05-JavaScriptåŸºç¡€-ES6è¯­æ³•/09-å†…ç½®å¯¹è±¡æ‰©å±•-Setæ•°æ®ç»“æ„.md",
                        children: [],
                      },
                    ],
                  },
                  {
                    label: "å¼‚æ­¥ä¸æ¨¡å—åŒ–",
                    children: [
                      {
                        label: "Promise ä¸å¼‚æ­¥ç¼–ç¨‹",
                        path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/03-JavaScriptæ ¸å¿ƒ/05-JavaScriptåŸºç¡€-ES6è¯­æ³•/10-ES6-Promiseä¸å¼‚æ­¥ç¼–ç¨‹.md",
                        children: [],
                      },
                      {
                        label: "æ¨¡å—åŒ–ï¼šimport/export",
                        path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/03-JavaScriptæ ¸å¿ƒ/05-JavaScriptåŸºç¡€-ES6è¯­æ³•/11-ES6-æ¨¡å—åŒ–-import-export.md",
                        children: [],
                      },
                    ],
                  },
                  {
                    label: "é¢å‘å¯¹è±¡",
                    children: [
                      {
                        label: "ç±»ä¸é¢å‘å¯¹è±¡",
                        path: "./01-æ ¸å¿ƒæŠ€æœ¯åŸºç¡€/03-JavaScriptæ ¸å¿ƒ/05-JavaScriptåŸºç¡€-ES6è¯­æ³•/12-ES6-ç±»ä¸é¢å‘å¯¹è±¡.md",
                        children: [],
                      },
                    ],
                  },
                  {
                    label: "å®æˆ˜ç»ƒä¹ ä¸ç»“æœè¾“å‡º",
                    children: [
                      {
                        label: "ç»ƒä¹ ï¼šä½œç”¨åŸŸ/è§£æ„/ç®­å¤´æ··åˆé¢˜ï¼ˆå«è¾“å‡ºï¼‰",
                        path: "./docs/å®æˆ˜/JS-ç»ƒä¹ -ä½œç”¨åŸŸä¸è§£æ„è¾“å‡º.md",
                        children: [],
                      },
                      {
                        label: "å®æˆ˜ï¼šåŸç”Ÿ JS å®ç° Todo æ¸…å•ï¼ˆå«æˆªå›¾ï¼‰",
                        path: "./docs/å®æˆ˜/JS-å®æˆ˜-Todoæ¸…å•.md",
                        children: [],
                      },
                      {
                        label: "å®æˆ˜ï¼šFetch è¯·æ±‚ + DOM æ¸²æŸ“ï¼ˆå«è¾“å‡ºï¼‰",
                        path: "./docs/å®æˆ˜/JS-å®æˆ˜-Fetchä¸DOMæ›´æ–°.md",
                        children: [],
                      },
                    ],
                  },
                ],
              },
            ],
          },
          {
            label: "ä¸»æµæ¡†æ¶ä¸åº“",
            children: [
              // {
              //   label: "Reactç”Ÿæ€",
              //   children: [
              //     {
              //       label: "React åŸºç¡€ä¸ JSX",
              //       children: [],
              //     },
              //     {
              //       label: "Hooks ä¸ Context API",
              //       children: [],
              //     },
              //     {
              //       label: "è·¯ç”±ï¼šReact Router",
              //       children: [],
              //     },
              //     {
              //       label: "çŠ¶æ€ç®¡ç†ï¼šRedux / Zustand / Recoil",
              //       children: [],
              //     },
              //     {
              //       label: "è¡¨å•ä¸æ ¡éªŒã€HTTP è¯·æ±‚ï¼ˆFetch/Axiosï¼‰",
              //       children: [],
              //     },
              //     {
              //       label: "SSR / SSGï¼šNext.js",
              //       children: [],
              //     },
              //   ],
              // },
              {
                label: "Vue åŸºç¡€ï¼ˆä»0-1ï¼‰",
                children: [
                  {
                    label: "å…¥é—¨ä¸ç¯å¢ƒ",
                    children: [
                      {
                        label: "Vue ä»‹ç»ä¸åŸºç¡€æ¦‚å¿µ",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/01-Vueçš„ä»‹ç»å’Œvue-cli.md",
                        children: [],
                      },
                      {
                        label: "ç³»ç»ŸæŒ‡ä»¤ï¼ˆåŸºç¡€ï¼‰",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/02-Vueçš„ç³»ç»ŸæŒ‡ä»¤.md",
                        children: [],
                      },
                      {
                        label: "äº‹ä»¶ä¸ä¿®é¥°ç¬¦",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/03-v-onçš„äº‹ä»¶ä¿®é¥°ç¬¦.md",
                        children: [],
                      },
                      {
                        label: "ç³»ç»ŸæŒ‡ä»¤ï¼ˆè¿›é˜¶ï¼‰",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/04-Vueçš„ç³»ç»ŸæŒ‡ä»¤2.md",
                        children: [],
                      },
                    ],
                  },
                  {
                    label: "ç»„ä»¶ä¸é€šä¿¡",
                    children: [
                      {
                        label: "ç»„ä»¶çš„å®šä¹‰ä¸æ³¨å†Œ",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/11-ç»„ä»¶çš„å®šä¹‰ä¸æ³¨å†Œ.md",
                        children: [],
                      },
                      {
                        label: "ç»„ä»¶é€šä¿¡ä¸æ•°æ®ä¼ é€’",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/12-ç»„ä»¶é€šä¿¡ä¸æ•°æ®ä¼ é€’.md",
                        children: [],
                      },
                      {
                        label: "ç”Ÿå‘½å‘¨æœŸå‡½æ•°",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/08-ç”Ÿå‘½å‘¨æœŸå‡½æ•°.md",
                        children: [],
                      },
                    ],
                  },
                  {
                    label: "è·¯ç”±ä¸çŠ¶æ€",
                    children: [
                      {
                        label: "Vue Router åŸºç¡€",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/13-VueRouterè·¯ç”±.md",
                        children: [],
                      },
                      {
                        label: "Vue Router è¿›é˜¶ä¸å¯¼èˆªå®ˆå«",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/17-VueRouter-è¿›é˜¶ä¸å¯¼èˆªå®ˆå«.md",
                        children: [],
                      },
                      {
                        label: "Pinia çŠ¶æ€ç®¡ç†å…¥é—¨",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/16-Pinia-çŠ¶æ€ç®¡ç†å…¥é—¨.md",
                        children: [],
                      },
                    ],
                  },
                  {
                    label: "æ•°æ®ä¸å¼‚æ­¥",
                    children: [
                      {
                        label: "Ajax è¯·æ±‚ä¸ HTTP",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/09-Ajaxè¯·æ±‚ä¸HTTP.md",
                        children: [],
                      },
                      {
                        label: "è®¡ç®—å±æ€§ä¸ä¾¦å¬å™¨",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/14-è®¡ç®—å±æ€§ä¸ä¾¦å¬å™¨.md",
                        children: [],
                      },
                    ],
                  },
                  {
                    label: "è¿›é˜¶ç‰¹æ€§",
                    children: [
                      {
                        label: "è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼ˆç¤ºä¾‹ï¼‰",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/06-è‡ªå®šä¹‰è¿‡æ»¤å™¨-æ—¶é—´æ ¼å¼åŒ–.md",
                        children: [],
                      },
                      {
                        label: "è‡ªå®šä¹‰æŒ‰é”®ä¿®é¥°ç¬¦ä¸æŒ‡ä»¤",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/07-è‡ªå®šä¹‰æŒ‰é”®ä¿®é¥°ç¬¦ä¸è‡ªå®šä¹‰æŒ‡ä»¤.md",
                        children: [],
                      },
                      {
                        label: "åŠ¨ç”»ä¸è¿‡æ¸¡",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/10-VueåŠ¨ç”»ä¸è¿‡æ¸¡.md",
                        children: [],
                      },
                      {
                        label: "Composition API åŸºç¡€",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/15-Composition-API-åŸºç¡€.md",
                        children: [],
                      },
                    ],
                  },
                  {
                    label: "å®æˆ˜ç»ƒä¹ ä¸ç»“æœè¾“å‡º",
                    children: [
                      {
                        label: "åˆ—è¡¨åŠŸèƒ½ç¤ºä¾‹ï¼ˆå®˜æ–¹ç¤ºä¾‹ï¼‰",
                        path: "./ä¸»æµæ¡†æ¶ä¸åº“/VueåŸºç¡€/05-åˆ—è¡¨åŠŸèƒ½ç¤ºä¾‹.md",
                        children: [],
                      },
                      {
                        label: "å®æˆ˜ï¼šVue ç»„ä»¶åŒ– Todoï¼ˆå¯è¿è¡Œï¼‰",
                        path: "./docs/å®æˆ˜/Vue-å®æˆ˜-Todoç»„ä»¶åŒ–.md",
                        children: [],
                      },
                      {
                        label: "å®æˆ˜ï¼šè·¯ç”±ä¸åŠ¨æ€è¯¦æƒ…ï¼ˆå¯è¿è¡Œï¼‰",
                        path: "./docs/å®æˆ˜/Vue-å®æˆ˜-è·¯ç”±ä¸åŠ¨æ€è¯¦æƒ….md",
                        children: [],
                      },
                      {
                        label: "å®æˆ˜ï¼šPinia è®¡æ•°å™¨ï¼ˆå¯è¿è¡Œï¼‰",
                        path: "./docs/å®æˆ˜/Vue-å®æˆ˜-Piniaè®¡æ•°å™¨.md",
                        children: [],
                      },
                    ],
                  },
                ],
              },
              // {
              //   label: "Angularç”Ÿæ€",
              //   children: [
              //     {
              //       label: "æ¡†æ¶æ ¸å¿ƒä¸ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰",
              //       children: [],
              //     },
              //     {
              //       label: "è·¯ç”±ä¸å®ˆå«",
              //       children: [],
              //     },
              //     {
              //       label: "è¡¨å•ï¼ˆæ¨¡æ¿é©±åŠ¨/å“åº”å¼ï¼‰",
              //       children: [],
              //     },
              //     {
              //       label: "æœåŠ¡ä¸ HTTP é€šä¿¡",
              //       children: [],
              //     },
              //     {
              //       label: "RxJS ä¸å“åº”å¼ç¼–ç¨‹",
              //       children: [],
              //     },
              //   ],
              // },
            ],
          },
          {
            label: "å·¥å…·é“¾ä¸å·¥ç¨‹åŒ–",
            children: [
              {
                label: "æ„å»ºå·¥å…·",
                children: [
                  // {
                  //   label: "Webpacké…ç½®",
                  //   children: [],
                  // },
                  {
                    label: "Viteå¿«é€Ÿå¼€å‘",
                    path: "./å·¥å…·é“¾ä¸å·¥ç¨‹åŒ–/æ„å»ºå·¥å…·/Viteå¿«é€Ÿå¼€å‘/vite.md",
                    children: [],
                  },
                  // {
                  //   label: "Babelè½¬è¯‘",
                  //   children: [],
                  // },
                ],
              },
              //     {
              //       label: "ä»£ç è§„èŒƒ",
              //       children: [
              //         {
              //           label: "ESLinté…ç½®",
              //           children: [],
              //         },
              //         {
              //           label: "Prettieræ ¼å¼åŒ–",
              //           children: [],
              //         },
              //         {
              //           label: "Stylelintæ ·å¼æ£€æŸ¥",
              //           children: [],
              //         },
              //       ],
              //     },
              //     {
              //       label: "æ€§èƒ½ä¼˜åŒ–",
              //       children: [
              //         {
              //           label: "lighthouseæ€§èƒ½è¯„ä¼°",
              //           children: [],
              //         },
              //         {
              //           label: "ä»£ç åˆ†å‰²ä¸æ‡’åŠ è½½",
              //           children: [],
              //         },
              //         {
              //           label: "webpå›¾ç‰‡ä¼˜åŒ–",
              //           children: [],
              //         },
              //       ],
              // },
            ],
          },
          {
            label: "é¡¹ç›®å®æˆ˜ä¸æ¡ˆä¾‹",
            children: [
              {
                label: "ä¸ªäººä¸»é¡µ/åšå®¢æ­å»ºä¸éƒ¨ç½²",
                path: "./å·¥å…·é“¾ä¸å·¥ç¨‹åŒ–/é¡¹ç›®å®æˆ˜ä¸æ¡ˆä¾‹/ä¸ªäººä¸»é¡µ/åšå®¢æ­å»ºä¸éƒ¨ç½².md",
                children: [],
              },
            ],
          },
        ],
      };
      const contentEl = document.getElementById("content");
      const treeRoot = document.getElementById("treeRoot");

      const md = window.markdownit({
        html: true,
        linkify: true,
        typographer: true,
        highlight: (str, lang) => {
          try {
            if (lang && hljs.getLanguage(lang)) {
              return (
                `<pre><code class="hljs language-${lang}">` +
                hljs.highlight(str, { language: lang, ignoreIllegals: true })
                  .value +
                "</code></pre>"
              );
            }
            // æ— æ˜¾å¼è¯­è¨€ï¼šå¸¦åå¥½è‡ªåŠ¨æ£€æµ‹ï¼Œä¼˜å…ˆè¯†åˆ« xml/html/js/css ç­‰
            const preferred = [
              "xml",
              "html",
              "javascript",
              "typescript",
              "jsx",
              "tsx",
              "css",
              "json",
              "bash",
              "shell",
              "yaml",
              "markdown",
            ];
            const auto = hljs.highlightAuto(str, preferred);
            // HTML å¯å‘å¼ï¼šåŒ…å« doctypeã€html æˆ–å¸¸è§æ ‡ç­¾æ—¶å¼ºåˆ¶ç”¨ xml/html è¯­æ³•
            const looksLikeHtml =
              /<!doctype/i.test(str) ||
              /<\s*html[\s>]/i.test(str) ||
              /<\s*(head|body|div|span|header|footer|main|section|article|nav|h1|h2|h3|p|img|a|ul|li|pre|code)\b/i.test(
                str
              );
            let detected = auto.language || "";
            if (
              (!detected || detected === "plaintext" || detected === "text") &&
              looksLikeHtml
            ) {
              detected = "xml";
              const forced = hljs.highlight(str, {
                language: detected,
                ignoreIllegals: true,
              });
              return (
                `<pre><code class="hljs language-${detected}">` +
                forced.value +
                "</code></pre>"
              );
            }
            return (
              `<pre><code class="hljs language-${detected || "auto"}">` +
              auto.value +
              "</code></pre>"
            );
          } catch (e) {
            return (
              '<pre><code class="hljs">' +
              md.utils.escapeHtml(str) +
              "</code></pre>"
            );
          }
        },
      });

      // Tree çŠ¶æ€æŒä¹…åŒ–ï¼ˆå½“å‰é€‰ä¸­é¡¹ + å±•å¼€é¡¹ï¼‰
      const STORAGE_KEY = "treeStateV1";
      function loadState() {
        try {
          const raw = localStorage.getItem(STORAGE_KEY);
          if (!raw) return { activePath: "", expandedSlugs: [] };
          const parsed = JSON.parse(raw);
          return {
            activePath: parsed.activePath || "",
            expandedSlugs: Array.isArray(parsed.expandedSlugs)
              ? parsed.expandedSlugs
              : [],
          };
        } catch {
          return { activePath: "", expandedSlugs: [] };
        }
      }
      function saveState(partial) {
        const prev = loadState();
        const next = { ...prev, ...partial };
        try {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(next));
        } catch {}
      }
      function scrollContentToTop(smooth = true) {
        const scroller = document.querySelector(".main");
        if (scroller && typeof scroller.scrollTo === "function") {
          scroller.scrollTo({
            top: 0,
            left: 0,
            behavior: smooth ? "smooth" : "auto",
          });
        }
      }
      function setExpanded(slug, expanded, isTopLevel = false) {
        const state = loadState();
        const set = new Set(state.expandedSlugs || []);
        if (expanded) set.add(slug);
        else set.delete(slug);
        if (expanded && isTopLevel) {
          // åªå…è®¸ä¸€ä¸ªé¡¶çº§å±•å¼€ï¼šç§»é™¤å…¶å®ƒé¡¶çº§ slug
          const topRows = Array.from(
            document.querySelectorAll("ul.tree > li.tree-item > .tree-row")
          );
          const topSlugs = new Set(topRows.map((r) => r.dataset.slug || ""));
          for (const s of Array.from(set)) {
            if (topSlugs.has(s) && s !== slug) set.delete(s);
          }
          // åŒæ­¥å…³é—­å…¶å®ƒé¡¶çº§é¢æ¿ï¼ˆè§†è§‰ï¼‰
          const currentLi = document.querySelector(
            `ul.tree > li.tree-item > .tree-row[data-slug="${slug}"]`
          )?.parentElement;
          if (currentLi && currentLi.parentElement) {
            Array.from(currentLi.parentElement.children).forEach((sib) => {
              if (
                sib !== currentLi &&
                sib.classList &&
                !sib.classList.contains("collapsed")
              ) {
                // ç”¨åŠ¨ç”»æ–¹å¼æ”¶èµ·å…¶å®ƒé¡¶çº§
                collapseAnimated(sib);
                const t = sib.querySelector(":scope > .tree-row .tree-toggle");
                if (t) t.textContent = "â–¸";
              }
            });
            // ç¡®ä¿å½“å‰é¡¶çº§ä¸ºå±•å¼€çŠ¶æ€ï¼ˆå¸¦åŠ¨ç”»ï¼‰
            if (currentLi.classList.contains("collapsed")) {
              expandAnimated(currentLi);
              const t = currentLi.querySelector(
                ":scope > .tree-row .tree-toggle"
              );
              if (t) t.textContent = "â–¾";
            }
          }
        }
        saveState({ expandedSlugs: Array.from(set) });
        if (expanded && isTopLevel) {
          scrollContentToTop(true);
        }
      }

      function expandAnimated(li) {
        const children = li.querySelector(":scope > .tree-children");
        if (!children) return;
        // ä» 0 åˆ°å†…å®¹é«˜åº¦çš„è¿‡æ¸¡ï¼Œä½¿ç”¨åŒ rAF ä¿è¯èµ·å§‹å€¼è¢«æµè§ˆå™¨é‡‡çº³
        const full = children.scrollHeight;
        children.style.maxHeight = "0px";
        children.style.opacity = "0";
        li.classList.remove("collapsed");
        requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            children.style.maxHeight = full + "px";
            children.style.opacity = "1";
          });
        });
        const cleanup = () => {
          children.style.maxHeight = "";
        };
        const onEnd = (e) => {
          if (e.propertyName === "max-height") {
            children.removeEventListener("transitionend", onEnd);
            cleanup();
          }
        };
        children.addEventListener("transitionend", onEnd);
        setTimeout(cleanup, 500); // å…œåº•ï¼Œé˜²æ­¢æç«¯æƒ…å†µä¸‹æœªè§¦å‘ end
      }
      function collapseAnimated(li) {
        const children = li.querySelector(":scope > .tree-children");
        if (!children) return;
        // ä»å½“å‰é«˜åº¦åˆ° 0 çš„è¿‡æ¸¡ï¼Œç”¨åŒ rAF ç¡®ä¿æ›´é¡ºæ»‘
        const full = children.scrollHeight;
        children.style.maxHeight = full + "px";
        children.style.opacity = "1";
        requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            li.classList.add("collapsed");
            children.style.maxHeight = "0px";
            children.style.opacity = "0";
          });
        });
      }

      function getAncestors(li) {
        const arr = [];
        let cur = li?.parentElement?.closest(".tree-item");
        while (cur) {
          arr.push(cur);
          cur = cur.parentElement?.closest(".tree-item");
        }
        return arr;
      }

      function collapseAllExcept(targetLi) {
        if (!targetLi) return;
        const keepSet = new Set([targetLi, ...getAncestors(targetLi)]);
        treeRoot.querySelectorAll("li.tree-item").forEach((item) => {
          const hasChildren = !!item.querySelector(":scope > .tree-children");
          if (!hasChildren) return;
          if (keepSet.has(item)) {
            if (item.classList.contains("collapsed")) {
              expandAnimated(item);
              const t = item.querySelector(":scope > .tree-row .tree-toggle");
              if (t) t.textContent = "â–¾";
            }
          } else {
            if (!item.classList.contains("collapsed")) {
              collapseAnimated(item);
              const t = item.querySelector(":scope > .tree-row .tree-toggle");
              if (t) t.textContent = "â–¸";
            }
          }
        });
        const expandedSlugs = Array.from(
          treeRoot.querySelectorAll(
            "li.tree-item:not(.collapsed) > .tree-row[data-slug]"
          )
        )
          .map((r) => r.dataset.slug || "")
          .filter(Boolean);
        saveState({ expandedSlugs });
      }
      function applyHighlightToContent(rootEl) {
        if (!rootEl || !window.hljs) return;
        const preferred = [
          "xml",
          "html",
          "javascript",
          "typescript",
          "jsx",
          "tsx",
          "css",
          "json",
          "bash",
          "shell",
          "yaml",
          "markdown",
        ];
        const looksLikeHtml = (text) =>
          /<!doctype/i.test(text) ||
          /<\s*html[\s>]/i.test(text) ||
          /<\s*(head|body|div|span|header|footer|main|section|article|nav|h1|h2|h3|p|img|a|ul|li|pre|code)\b/i.test(
            text
          );
        rootEl.querySelectorAll("pre code").forEach((code) => {
          const raw = code.textContent || "";
          // ä¼˜å…ˆä½¿ç”¨ä»£ç å—å·²æœ‰çš„ language-xxx
          let lang = Array.from(code.classList).find((c) =>
            c.startsWith("language-")
          );
          lang = lang ? lang.replace("language-", "") : "";
          let result = null;
          try {
            if (lang && hljs.getLanguage(lang)) {
              result = hljs.highlight(raw, {
                language: lang,
                ignoreIllegals: true,
              });
            } else {
              result = hljs.highlightAuto(raw, preferred);
              if (
                (!result.language ||
                  result.language === "plaintext" ||
                  result.language === "text") &&
                looksLikeHtml(raw)
              ) {
                result = hljs.highlight(raw, {
                  language: "xml",
                  ignoreIllegals: true,
                });
              }
            }
            if (result) {
              code.innerHTML = result.value;
              code.classList.add("hljs");
              const finalLang =
                result.language || lang || (looksLikeHtml(raw) ? "xml" : "");
              if (finalLang) code.classList.add(`language-${finalLang}`);
            }
          } catch (e) {
            // å¿½ç•¥é«˜äº®é”™è¯¯ï¼Œä¿æŒåŸæ–‡
          }
        });
      }

      function renderMarkdown(text, title = "") {
        contentEl.innerHTML = md.render(text);
        // æ¸²æŸ“åè¿›è¡Œä»£ç é«˜äº®ï¼ˆè¦†ç›–æœªé€šè¿‡ md é«˜äº®çš„å†…è” <pre><code>ï¼‰
        applyHighlightToContent(contentEl);
        document.title = title ? `${title} - Markdown é¢„è§ˆ` : "Markdown é¢„è§ˆ";
      }

      function slugify(text) {
        return (
          text
            .toLowerCase()
            .trim()
            // ä¿ç•™ä¸­è‹±æ–‡ã€æ•°å­—ä¸ç©ºæ ¼/è¿æ¥ç¬¦
            .replace(/[^\u4e00-\u9fa5\w\s-]/g, "")
            .replace(/\s+/g, "-")
        );
      }

      function getNodePath(node) {
        if (node.path) return node.path;
        const base = "./docs/";
        return base + slugify(node.label) + ".md";
      }

      async function loadAndRenderNode(node) {
        const path = getNodePath(node);
        scrollContentToTop(true);
        try {
          const res = await fetch(encodeURI(path));
          if (!res.ok) throw new Error(res.statusText);
          const text = await res.text();
          renderMarkdown(text, node.label);
        } catch (e) {
          renderMarkdown(
            `# ${node.label}\n\n> æœªæ‰¾åˆ°æ–‡æ¡£ï¼š\`${path}\``,
            node.label
          );
        }
      }

      function renderTreeFromData(rootData) {
        if (!treeRoot) return;
        treeRoot.innerHTML = "";
        const ul = document.createElement("ul");
        ul.className = "tree";
        treeRoot.appendChild(ul);

        const createItem = (node) => {
          const li = document.createElement("li");
          li.className = "tree-item";
          if (node.children && node.children.length) {
            li.classList.add("collapsed");
          }
          const row = document.createElement("div");
          row.className = "tree-row";
          row.dataset.slug = slugify(node.label);
          if (node.path) row.dataset.path = getNodePath(node);

          if (node.children && node.children.length) {
            const toggle = document.createElement("span");
            toggle.className = "tree-toggle";
            toggle.textContent = "â–¸";
            toggle.setAttribute("aria-hidden", "true");
            toggle.addEventListener("click", (e) => {
              e.stopPropagation();
              const isCollapsed = li.classList.contains("collapsed");
              if (isCollapsed) {
                expandAnimated(li);
                toggle.textContent = "â–¾";
              } else {
                collapseAnimated(li);
                toggle.textContent = "â–¸";
              }
              const isTopLevel =
                li.parentElement && li.parentElement.classList.contains("tree");
              setExpanded(row.dataset.slug || "", isCollapsed, !!isTopLevel);
            });
            row.appendChild(toggle);
          } else {
            const spacer = document.createElement("span");
            spacer.className = "tree-toggle";
            spacer.textContent = "â€¢";
            spacer.style.opacity = "0.3";
            row.appendChild(spacer);
          }

          const text = document.createElement("span");
          text.textContent = node.label || "(æœªå‘½å)";
          row.appendChild(text);

          row.addEventListener("click", () => {
            const hasChildren = !!(node.children && node.children.length);
            const hasPath = !!node.path;
            if (hasPath) {
              document
                .querySelectorAll(".tree-row.active")
                .forEach((r) => r.classList.remove("active"));
              row.classList.add("active");
              loadAndRenderNode(node);
              // è®°å½•å½“å‰æ¿€æ´»æ–‡æ¡£è·¯å¾„
              saveState({ activePath: getNodePath(node) });
              // ä»…ä¿ç•™å½“å‰èŠ‚ç‚¹åˆ†æ”¯å±•å¼€ï¼Œå…¶å®ƒåˆ†æ”¯å¸¦åŠ¨ç”»å…³é—­
              const selfLi = row.closest(".tree-item");
              collapseAllExcept(selfLi);
            } else if (hasChildren) {
              // ä»…å±•å¼€/æ”¶èµ·ï¼Œä¸æ›´æ¢å³ä¾§å†…å®¹
              const isCollapsed = li.classList.contains("collapsed");
              if (isCollapsed) {
                expandAnimated(li);
                // ç‚¹å‡»ç›®å½•åå±•å¼€æ—¶ï¼Œä»…ä¿ç•™è¯¥ç›®å½•åˆ†æ”¯
                collapseAllExcept(li);
              } else {
                collapseAnimated(li);
              }
              const toggleEl = row.querySelector(".tree-toggle");
              if (toggleEl) toggleEl.textContent = isCollapsed ? "â–¾" : "â–¸";
              const isTopLevel =
                li.parentElement && li.parentElement.classList.contains("tree");
              setExpanded(row.dataset.slug || "", isCollapsed, !!isTopLevel);
            } else {
              // æ—  path çš„å¶å­èŠ‚ç‚¹ï¼šä¸åšä»»ä½•å†…å®¹åŠ è½½
            }
          });

          li.appendChild(row);
          if (node.children && node.children.length) {
            const children = document.createElement("ul");
            children.className = "tree-children";
            node.children.forEach((c) => children.appendChild(createItem(c)));
            li.appendChild(children);
          }
          return li;
        };

        // ç›´æ¥æ¸²æŸ“æ ¹èŠ‚ç‚¹ï¼ˆæ—¢å±•ç¤ºæ ¹èŠ‚ç‚¹æœ¬èº«ï¼Œä¹Ÿå±•ç¤ºå…¶ childrenï¼‰
        ul.appendChild(createItem(rootData));

        // åº”ç”¨æŒä¹…åŒ–çš„å±•å¼€çŠ¶æ€
        const state = loadState();
        if (state.expandedSlugs && state.expandedSlugs.length) {
          state.expandedSlugs.forEach((slug) => {
            const row = treeRoot.querySelector(
              `.tree-row[data-slug="${slug}"]`
            );
            if (row) {
              const li = row.closest(".tree-item");
              if (li && li.classList.contains("collapsed")) {
                li.classList.remove("collapsed");
                const t = row.querySelector(".tree-toggle");
                if (t) t.textContent = "â–¾";
              }
            }
          });
          // æ¢å¤åä¹Ÿä¿è¯ä»…ä¸€ä¸ªé¡¶çº§å±•å¼€
          const openTop = Array.from(
            treeRoot.querySelectorAll("ul.tree > li.tree-item:not(.collapsed)")
          );
          if (openTop.length > 1) {
            openTop.slice(1).forEach((li) => {
              li.classList.add("collapsed");
              const t = li.querySelector(":scope > .tree-row .tree-toggle");
              if (t) t.textContent = "â–¸";
            });
            // æ¸…ç†å­˜å‚¨ï¼Œä»…ä¿ç•™ç¬¬ä¸€ä¸ªé¡¶çº§å±•å¼€
            const firstSlug =
              openTop[0].querySelector(":scope > .tree-row")?.dataset.slug ||
              "";
            if (firstSlug) {
              setExpanded(firstSlug, true, true);
            }
          }
        }

        // è‹¥æœ‰å·²ä¿å­˜çš„æ¿€æ´»è·¯å¾„ï¼Œåˆ™æ¢å¤ä¹‹ï¼›å¦åˆ™é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªå« path çš„èŠ‚ç‚¹
        const activateSaved = (() => {
          const activePath = state.activePath;
          if (!activePath) return false;
          const rows = treeRoot.querySelectorAll(".tree-row[data-path]");
          let target = null;
          rows.forEach((r) => {
            if (!target && r.dataset.path === activePath) target = r;
          });
          if (!target) return false;
          // å±•å¼€æ‰€æœ‰ç¥–å…ˆ
          let li = target.closest(".tree-item");
          while (li) {
            if (li.classList.contains("collapsed")) {
              li.classList.remove("collapsed");
              const t = li.querySelector(":scope > .tree-row .tree-toggle");
              if (t) t.textContent = "â–¾";
            }
            li = li.parentElement?.closest(".tree-item");
          }
          // æ¿€æ´»å¹¶åŠ è½½
          document
            .querySelectorAll(".tree-row.active")
            .forEach((r) => r.classList.remove("active"));
          target.classList.add("active");
          loadAndRenderNode({
            label: target.textContent || "",
            path: activePath,
          });
          return true;
        })();

        if (activateSaved) return;

        // é»˜è®¤ï¼šå±•å¼€æ ¹èŠ‚ç‚¹å¹¶åŠ è½½æ ¹èŠ‚ç‚¹å¯¹åº”çš„æ–‡æ¡£ï¼ˆè‹¥ root å¸¦æœ‰ pathï¼‰
        const rootSlug = slugify(rootData.label || "");
        const rootRow = treeRoot.querySelector(
          `.tree-row[data-slug="${rootSlug}"]`
        );
        if (rootRow) {
          const rootLi = rootRow.closest(".tree-item");
          if (rootLi && rootLi.classList.contains("collapsed")) {
            rootLi.classList.remove("collapsed");
            const t = rootLi.querySelector(":scope > .tree-row .tree-toggle");
            if (t) t.textContent = "â–¾";
          }
          // å¦‚æœæ ¹èŠ‚ç‚¹æœ‰ pathï¼Œåˆ™é»˜è®¤æ¿€æ´»å¹¶åŠ è½½å®ƒå¯¹åº”çš„æ–‡æ¡£
          if (rootData.path || rootRow.dataset.path) {
            document
              .querySelectorAll(".tree-row.active")
              .forEach((r) => r.classList.remove("active"));
            rootRow.classList.add("active");
            loadAndRenderNode(rootData);
            saveState({
              expandedSlugs: [rootSlug],
              activePath: getNodePath(rootData),
            });
            return;
          }
        }
        // è‹¥æ ¹èŠ‚ç‚¹æ²¡æœ‰ pathï¼Œæç¤ºç”¨æˆ·é€‰æ‹©æ¡ç›®
        renderMarkdown("é€‰æ‹©å·¦ä¾§æ¡ç›®ä»¥åŠ è½½æ–‡æ¡£");
      }

      // åˆå§‹åŒ–ï¼šç”¨ data æ„å»ºæ ‘
      renderTreeFromData(data);
    </script>
  </body>
</html>
