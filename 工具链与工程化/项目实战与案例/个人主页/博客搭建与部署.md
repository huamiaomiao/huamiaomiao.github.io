# 个人主页/博客搭建与部署（从 0 到 1，一步步可运行）

目标：用 Vite 快速创建一个“个人主页 + 博客列表”的网站，支持本地开发、构建与上线部署。你将看到实际页面与文章列表渲染效果。

---

一、准备环境

```bash
node -v    # Node.js 18+（LTS 更稳）
npm -v     # 包管理器使用 npm/pnpm/yarn 均可
```

二、创建项目（基于 Vue 模板，其他框架步骤相同）

```bash
npm create vite@latest my-site -- --template vue
cd my-site
npm i
npm run dev
# 浏览器打开 http://localhost:5173
```

目录说明（关键文件）

```
my-site/
  index.html
  src/
    main.ts
    App.vue
    pages/
      Home.vue
      Blog.vue
    data/
      posts.json
  public/
  vite.config.ts（后续添加）
```

三、添加页面与数据

1. 创建 `src/pages/Home.vue`（个人主页）

```vue
<template>
  <header class="hero">
    <img class="avatar" :src="avatar" alt="avatar" />
    <h1>{{ profile.name }}</h1>
    <p>{{ profile.title }}</p>
    <nav class="links">
      <a :href="profile.github" target="_blank">GitHub</a>
      <a :href="profile.twitter" target="_blank">Twitter</a>
      <a href="#blog">博客</a>
    </nav>
  </header>
  <section class="about">
    <h2>关于我</h2>
    <p>{{ profile.about }}</p>
  </section>
  <section id="blog" class="cta">
    <h2>最新文章</h2>
    <slot />
  </section>
</template>
<script setup lang="ts">
const profile = {
  name: "Ada Lovelace",
  title: "Frontend Engineer",
  about: "热爱 Web 与人机交互，关注性能与体验。",
  github: "https://github.com/yourname",
  twitter: "https://twitter.com/yourname",
};
const avatar = "https://avatars.githubusercontent.com/u/9919?v=4";
</script>
<style>
.hero {
  text-align: center;
  padding: 32px 16px;
}
.avatar {
  width: 96px;
  height: 96px;
  border-radius: 50%;
}
.links {
  display: flex;
  gap: 12px;
  justify-content: center;
  margin-top: 12px;
}
.about,
.cta {
  max-width: 860px;
  margin: 24px auto;
  padding: 0 16px;
}
</style>
```

2. 创建 `src/pages/Blog.vue`（文章列表）

```vue
<template>
  <ul class="posts">
    <li v-for="p in posts" :key="p.slug" class="post">
      <h3>{{ p.title }}</h3>
      <p class="meta">{{ p.date }} · {{ p.tags.join(" / ") }}</p>
      <p>{{ p.summary }}</p>
      <a :href="p.link" target="_blank">阅读全文 →</a>
    </li>
  </ul>
</template>
<script setup lang="ts">
import posts from "@/data/posts.json";
</script>
<style>
.posts {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  gap: 16px;
}
.post {
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  padding: 16px;
  background: #fff;
}
.meta {
  color: #6b7280;
  font-size: 14px;
  margin: 4px 0 8px;
}
</style>
```

3. 创建 `src/data/posts.json`（模拟博客数据）

```json
[
  {
    "slug": "hello-world",
    "title": "Hello, World!",
    "date": "2025-01-01",
    "tags": ["随笔"],
    "summary": "第一篇博客文章，记录我的开发起点与方向。",
    "link": "https://example.com/blog/hello-world"
  },
  {
    "slug": "vite-intro",
    "title": "Vite 上手指南",
    "date": "2025-01-12",
    "tags": ["Vite", "前端工程化"],
    "summary": "用最少步骤从 0 到 1 搭建现代前端开发环境。",
    "link": "https://example.com/blog/vite-intro"
  }
]
```

四、接入页面到应用

修改 `src/App.vue`：

```vue
<template>
  <Home>
    <Blog />
  </Home>
</template>
<script setup lang="ts">
import Home from "./pages/Home.vue";
import Blog from "./pages/Blog.vue";
</script>
<style>
:root {
  color-scheme: light;
}
body {
  margin: 0;
  font: 16px/1.65 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background: #f6f8fa;
}
h1,
h2,
h3 {
  line-height: 1.25;
}
a {
  color: #0969da;
  text-decoration: none;
}
a:hover {
  text-decoration: underline;
}
</style>
```

五、基础配置（可选但推荐）

新增 `vite.config.ts`（若模板已有，可合并）：

```ts
import { defineConfig } from "vite";
import vue from "@vitejs/plugin-vue";

export default defineConfig({
  plugins: [vue()],
  resolve: { alias: { "@": "/src" } },
  server: {
    open: true,
  },
  build: {
    outDir: "dist",
    rollupOptions: {
      output: {
        manualChunks: { vue: ["vue"] },
      },
    },
  },
});
```

六、运行与查看效果

```bash
npm run dev
# 页面应展示头像/个人信息以及“最新文章”列表
```

七、添加文章（两种方式）

- 直接在 `src/data/posts.json` 添加条目（最快）
- 连接你的博客平台地址（例如 Notion/Hashnode/自建博客），把 `link` 指向真实文章

八、构建与本地生产预览

```bash
npm run build      # 产出 dist/
npm run preview    # 以生产模式预览（http://localhost:4173）
```

九、上线部署（任选其一）

1. Netlify/Vercel（零配置）

- 连接 Git 仓库，设置构建命令：`npm run build`
- 发布目录：`dist`
- 绑定自定义域名（可选）

2. GitHub Pages

- 构建产物推送到 `gh-pages` 分支
- 若仓库子路径部署（如 /my-site/），在 `vite.config.ts` 里设置 `base: '/my-site/'`

3. Nginx 静态托管

```
root /var/www/my-site/dist;
location / {
  try_files $uri /index.html;
}
```

十、可选增强

- 深色模式：`@media (prefers-color-scheme: dark)` 增加暗色变量
- SEO：添加 `<title>`、`<meta name="description">`，开放图（OG）标签
- 性能：图片使用 `width/height` 或 `aspect-ratio`，避免 CLS；分包与懒加载

### 可访问性完善（语义与 ARIA）

将页面结构用地标元素组织；为图片与导航增加可读描述。

```vue
<!-- 在 App.vue 或 Home.vue 中 -->
<template>
  <header class="hero" role="banner">...</header>
  <main id="main-content">
    <section aria-labelledby="about-title" class="about">
      <h2 id="about-title">关于我</h2>
      ...
    </section>
    <section aria-labelledby="posts-title" class="cta">
      <h2 id="posts-title">最新文章</h2>
      <Blog />
    </section>
  </main>
  <footer role="contentinfo">
    <small>© 2025 Your Name</small>
  </footer>
  <nav aria-label="社交链接" class="links">...</nav>
  <img class="avatar" :src="avatar" alt="个人头像" width="96" height="96" />
  <!-- 指定 width/height 或使用 aspect-ratio，避免布局抖动 -->
</template>
```

### 加入 Sass 预处理（样式可维护）

```bash
npm i -D sass
```

```scss
/* src/styles/theme.scss */
$primary: #0969da;
$radius: 10px;
:root {
  --space: 16px;
}
.card {
  border: 1px solid #e5e7eb;
  border-radius: $radius;
  padding: var(--space);
}
@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: dark;
  }
  body {
    background: #0b1220;
    color: #e5e7eb;
  }
}
```

```ts
// src/main.ts
import "./styles/theme.scss";
```

### 响应式与深色模式（媒体查询实践）

```css
/* 响应式栅格 */
.posts {
  display: grid;
  gap: 16px;
  grid-template-columns: 1fr;
}
@media (min-width: 768px) {
  .posts {
    grid-template-columns: repeat(2, 1fr);
  }
}
@media (min-width: 1200px) {
  .posts {
    grid-template-columns: repeat(3, 1fr);
  }
}
/* 深色模式 hover 优化 */
@media (prefers-color-scheme: dark) {
  .post {
    background: #0f172a;
    border-color: #1f2937;
  }
  a {
    color: #7dd3fc;
  }
}
```

### 使用环境变量与代理拉取文章（ES6 + Promise/Fetch）

1. 根目录新建 `.env.development`

```
VITE_API_BASE=http://localhost:3000
```

2. 在 `vite.config.ts` 增加代理：

```ts
server: {
  open: true,
  proxy: { '/api': import.meta.env.VITE_API_BASE || 'http://localhost:3000' }
}
```

3. 在 `src/pages/Blog.vue` 中按需切换“本地 JSON”或“接口模式”：

```vue
<script setup lang="ts">
import { ref, onMounted } from "vue";
import localPosts from "@/data/posts.json";
const posts = ref(localPosts as any[]);
onMounted(async () => {
  if (import.meta.env.DEV) {
    // 开发期示例：走本地代理的 API（需要后端或本地 mock）
    try {
      const res = await fetch("/api/posts");
      if (res.ok) posts.value = await res.json();
    } catch {}
  }
});
</script>
```

### 动态导入与代码分割（减少首屏体积）

在 `App.vue` 中动态加载博客列表组件：

```vue
<script setup lang="ts">
import { defineAsyncComponent } from "vue";
const Blog = defineAsyncComponent(() => import("./pages/Blog.vue")); // 懒加载
</script>
```

> 生产构建后会将 Blog 拆分成独立 chunk，首屏更轻。

### 订阅邮件表单（表单语义 + 原生校验）

在 `Home.vue` 的“最新文章”区域下方添加订阅表单：

```vue
<form id="subscribe" class="subscribe" @submit.prevent="submit" novalidate>
  <label for="mail">订阅最新文章：邮箱</label>
  <input id="mail" name="mail" type="email" required placeholder="you@example.com" />
  <button>订阅</button>
  <output id="msg" aria-live="polite"></output>
</form>
<script setup lang="ts">
async function submit(e: SubmitEvent) {
  const form = e.target as HTMLFormElement;
  const msg = document.getElementById("msg") as HTMLOutputElement;
  if (!form.checkValidity()) {
    form.reportValidity();
    return;
  }
  const fd = new FormData(form);
  try {
    // 开发期可走 /api 代理；生产替换为真实接口
    const res = await fetch("/api/subscribe", { method: "POST", body: fd });
    msg.value = res.ok ? "订阅成功" : "订阅失败";
  } catch {
    msg.value = "网络异常";
  }
}
</script>
<style>
.subscribe {
  display: grid;
  gap: 8px;
  max-width: 520px;
  margin: 16px auto;
}
.subscribe input {
  padding: 8px 10px;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
}
.subscribe button {
  padding: 8px 12px;
  border-radius: 8px;
  background: #22c55e;
  color: #fff;
}
</style>
```

十一、常见问题

- 页面空白？检查 `src/main.ts` 是否正确 `mount('#app')`
- 构建后资源 404？确保 Nginx/SPA 回退到 `index.html`；子路径部署设置 `base`
- 列表不显示？检查 `posts.json` 路径与导入是否正确（`@/data/posts.json`）
- 深色模式失效？确认未被全局样式覆盖，并确保系统/浏览器处于深色偏好
- 代理/接口报错？检查 `VITE_API_BASE` 与 `server.proxy` 配置；生产环境由网关处理跨域
- 首屏仍偏大？确认 Blog 懒加载已生效，并检查图片尺寸/格式

至此，你已经完成从 0 到 1 的个人主页/博客站点：具备主页、文章列表、本地开发、构建与上线的完整闭环。\*\*\* End Patch
