# ES6：类与面向对象

## 基本语法

```js
class Person {
  constructor(name) {
    this.name = name;
  }
  greet() {
    return `Hi, I'm ${this.name}`;
  }
}
console.log(new Person("Alice").greet());
```

## 继承与 super

```js
class Animal {
  speak() {
    return "...";
  }
}
class Dog extends Animal {
  speak() {
    return super.speak() + " woof";
  }
}
console.log(new Dog().speak());
```

## 私有字段与存取器

```js
class Counter {
  #value = 0;
  get value() {
    return this.#value;
  }
  inc() {
    this.#value++;
  }
}
const c = new Counter();
c.inc();
console.log(c.value); // 1
```

## 练习

- 封装一个 `Stack` 类，支持 `push/pop/peek/size`。\*\*\*

---

## 知识拓展

- 静态成员与工厂方法

```js
class User {
  static from(json) {
    const u = new User();
    Object.assign(u, json);
    return u;
  }
}
```

- 私有字段与 WeakMap 的对比

```js
// #private：语法级私有（编译期）；WeakMap：运行时封装
const _store = new WeakMap();
class Counter {
  constructor() {
    _store.set(this, { value: 0 });
  }
  inc() {
    _store.get(this).value++;
  }
  get value() {
    return _store.get(this).value;
  }
}
```

- Mixin（组合能力）与组合优先

```js
const Timestamped = (Base) =>
  class extends Base {
    constructor(...args) {
      super(...args);
      this.createdAt = Date.now();
    }
  };
class Entity {}
class Post extends Timestamped(Entity) {}
```
